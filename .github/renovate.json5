{
  extends: [
    'config:base',
    ':automergeMinor'
  ],
  timezone: 'Asia/Jerusalem',
  schedule: [
    'after 2am and before 5am'
  ],
  rebaseWhen: 'conflicted',
  updateLockFiles: true,
  prCreation: 'immediate',
  rangeStrategy: 'auto',
  prHourlyLimit: 5,
  prConcurrentLimit: 5,
  requiredStatusChecks: null, // bors will always be pending and this feature is only partially implemented so setting to not wait on pr status
  automergeType: 'pr-comment',
  automergeComment: 'bors r+',
  labels: ['renovate ðŸŽ¨'],
  npm: {
    fileMatch: ['(^|/)package.json$', '(^|/)package.dist.json$']
  },
  terraform: {
    enabled: false
  },
  packageRules: [
    {
      sourceUrlPrefixes: ['https://github.com/middyjs/middy'],
      groupName: 'Middy monorepo packages'
    },
    {
      packageNames: ['aws-appsync'],
      allowedVersions: '4.0.1' // we don't trust them :\
    },
    {
      paths: ['e2e/**'],
      packageNames: ['webpack'],
      allowedVersions: '4.*' // https://github.com/env0/env0/pull/2872#issuecomment-761878435
    },
    {
      packageNames: ['@shiftcoders/dynamo-easy'],
      allowedVersions: '6.0.0-pr91.1' // https://github.com/shiftcode/dynamo-easy/issues/331
    },
    {
      packageNames: ['serverless-vpc-plugin'],
      allowedVersions: '0.10.0' // breaking changes in https://github.com/smoketurner/serverless-vpc-plugin/releases/tag/v1.0.0
    },
    {
      packageNames: ['@azure/identity'],
      allowedVersions: '1.0.3' // can be removed when v2 becomes stable. See: https://github.com/Azure/azure-sdk-for-js/issues/14346#issuecomment-825995352
    },
    {
      packageNames: ['antd', '@ant-design/icons', '@nivo/line', 'auth0-lock', 'react-datepicker'],
      "automerge": false // always manually visually verify our ui library
    },
    {
      "packageNames": ["carlpett/sops"],  // We don't want to update our sops TF provider version only version use sops 3.6.1
      "enabled": false
    },
    {
      "packageNames": ["jest"],  // This version breaks isolateModules https://github.com/facebook/jest/issues/12146
      "allowedVersions": "> 27.4.*"
    },
    {
      "packageNames": ["ts-jest"],  // This version breaks isolateModules https://github.com/facebook/jest/issues/12146
      "allowedVersions": "> 27.1.*"
    },
    {
      packageNames: ['@shelf/jest-dynamodb'], // higher versions break tests
      allowedVersions: '1.8.1'
    },
    {
      "packageNames": ["ajv"],
      "matchUpdateTypes": ["major", "minor"], // AJV version must match with AJV version in our validator middy. Only allow patch versions
      "enabled": false
    },
    {
      packageNames: ["serverless-webpack"], // On higher versions we get OOM exceptions - https://github.com/serverless-heaven/serverless-webpack/issues/299
      allowedVersions: '5.5.0'
    },
    {
      packageNames: ['@emotion/core', '@emotion/styled', '@emotion/css'], // Upgrading emotion make our unit test to fall, https://github.com/env0/env0/pull/6761#issuecomment-1055813808
      enabled: false
    },
    {
      packageNames: ["serverless"], // There are a lot of breaking changes in serverless v3 - https://trello.com/c/Bd7VcmNW/5565-upgrade-to-serverless-v3-pain
      allowedVersions: "< 3.0.0"
    },
    {
      packageNames: ["node", "@types/node"],
      allowedVersions: "<= 14.*.*"
    }
  ]
}
